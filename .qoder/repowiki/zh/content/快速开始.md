# 快速开始

<cite>
**Referenced Files in This Document**   
- [README.md](file://README.md)
- [application.properties](file://backend/src/main/resources/application.properties)
- [schema.sql](file://backend/src/main/resources/schema.sql)
- [test-data.sql](file://backend/src/main/resources/test-data.sql)
- [pom.xml](file://backend/pom.xml)
- [package.json](file://frontend/package.json)
- [BatchSelectionApplication.java](file://backend/src/main/java/com/example/batchselection/BatchSelectionApplication.java)
- [vite.config.js](file://frontend/vite.config.js)
</cite>

## 目录
1. [简介](#简介)
2. [环境准备](#环境准备)
3. [数据库初始化](#数据库初始化)
4. [后端服务启动](#后端服务启动)
5. [前端服务启动](#前端服务启动)
6. [系统验证](#系统验证)
7. [常见问题](#常见问题)

## 简介
本指南旨在帮助开发者在10分钟内完成批量勾选信息管理系统的本地环境搭建。该系统基于React + Spring Boot + MySQL技术栈，提供树形表格展示、在线编辑、批量提交等核心功能。通过本指南，您将学习如何安装必要的开发工具、配置数据库、启动前后端服务，并验证系统正常运行。

## 环境准备
在开始之前，请确保您的开发环境已安装以下软件：

### 1. JDK 11+
验证Java版本：
```bash
java -version
```
预期输出：
```
openjdk version "11.0.12" 2021-07-20
OpenJDK Runtime Environment (build 11.0.12+7)
OpenJDK 64-Bit Server VM (build 11.0.12+7, mixed mode)
```

### 2. Maven 3.6+
验证Maven版本：
```bash
mvn -version
```
预期输出：
```
Apache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)
Maven home: /path/to/maven
Java version: 11.0.12, vendor: Oracle Corporation
```

### 3. Node.js 16+
验证Node.js版本：
```bash
node -v
npm -v
```
预期输出：
```
v16.14.0
8.3.1
```

### 4. MySQL 8.0
验证MySQL版本：
```bash
mysql --version
```
预期输出：
```
mysql  Ver 8.0.33 for macos13.0 on x86_64 (MySQL Community Server - GPL)
```

**Section sources**
- [README.md](file://README.md#L95-L103)

## 数据库初始化
### 1. 创建数据库并执行表结构
使用提供的`schema.sql`脚本创建数据库和表结构：

```bash
mysql -u root -p < backend/src/main/resources/schema.sql
```

执行成功后，您将看到类似以下的输出：
```
Enter password: 
```
输入MySQL密码后，脚本将自动创建`batch_selection`数据库以及`app_info`和`task_info`两张表。

### 2. 可选：导入测试数据
为了快速体验系统功能，您可以选择导入预设的测试数据：

```bash
mysql -u root -p batch_selection < backend/src/main/resources/test-data.sql
```

导入成功后，系统将显示数据统计信息：
```
Enter password: 
+----------------+
| total_records  |
+----------------+
| 9              |
+----------------+
+----------+-------------+
| app_name | group_count |
+----------+-------------+
| app1     | 3           |
| app2     | 2           |
| app3     | 4           |
+----------+-------------+
```

**Section sources**
- [schema.sql](file://backend/src/main/resources/schema.sql#L1-L38)
- [test-data.sql](file://backend/src/main/resources/test-data.sql#L1-L20)

## 后端服务启动
### 1. 修改数据库配置
根据您的MySQL环境，修改`application.properties`文件中的数据库凭证：

```properties
# 数据源配置
spring.datasource.url=jdbc:mysql://localhost:3306/batch_selection?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&createDatabaseIfNotExist=true
spring.datasource.username=root
spring.datasource.password=your_password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
```

请将`your_password`替换为您实际的MySQL密码。

### 2. 启动Spring Boot应用
进入backend目录并启动应用：

```bash
cd backend
mvn spring-boot:run
```

服务启动成功后，您将看到类似以下的日志输出：
```
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.7.14)

2023-11-15 10:30:45 [main] INFO  com.example.batchselection.BatchSelectionApplication - Starting BatchSelectionApplication v1.0.0 on localhost with PID 12345
2023-11-15 10:30:45 [main] INFO  com.example.batchselection.BatchSelectionApplication - No active profile set, falling back to default profiles: default
2023-11-15 10:30:47 [main] INFO  o.s.b.w.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-11-15 10:30:47 [main] INFO  com.example.batchselection.BatchSelectionApplication - Started BatchSelectionApplication in 5.234 seconds (JVM running for 6.123)
```

后端服务将在 `http://localhost:8080` 启动。

**Section sources**
- [application.properties](file://backend/src/main/resources/application.properties#L7-L11)
- [pom.xml](file://backend/pom.xml#L72-L75)
- [BatchSelectionApplication.java](file://backend/src/main/java/com/example/batchselection/BatchSelectionApplication.java#L12-L14)

## 前端服务启动
### 1. 安装依赖
进入frontend目录并安装Node.js依赖：

```bash
cd frontend
npm install
```

安装成功后，您将看到类似以下的输出：
```
added 123 packages from 85 contributors in 10.234s
```

### 2. 启动开发服务器
启动前端开发服务器：

```bash
npm run dev
```

服务启动成功后，您将看到以下信息：
```
  VITE v5.0.0  ready in 123 ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: use --host to expose
  ➜  press h to show help
```

**Section sources**
- [package.json](file://frontend/package.json#L17-L19)
- [vite.config.js](file://frontend/vite.config.js#L7-L13)

## 系统验证
完成上述步骤后，打开浏览器访问 `http://localhost:3000`，您应该能够看到批量勾选信息管理系统的主界面。

### 验证步骤：
1. **页面加载**：页面自动展示应用和分组数据，包含app1、app2、app3三个应用
2. **树形结构**：点击应用名称左侧的箭头可以展开/折叠分组列表
3. **勾选功能**：勾选应用或分组，提交按钮将显示已勾选数量
4. **编辑功能**：双击可编辑的单元格（如分组名、机房等）进入编辑模式
5. **提交功能**：点击"提交"按钮，系统将显示"任务提交成功"的提示

如果所有功能正常，说明系统已成功运行。

**Section sources**
- [README.md](file://README.md#L155)
- [vite.config.js](file://frontend/vite.config.js#L7)

## 常见问题
### 1. 数据库连接失败
**问题**：启动后端时出现`Access denied for user`错误
**解决方案**：
- 检查`application.properties`中的用户名和密码是否正确
- 确保MySQL服务已启动
- 如果使用非root用户，请确保用户有`batch_selection`数据库的读写权限

### 2. 端口占用
**问题**：`Port 8080 is already in use`或`Port 3000 is already in use`
**解决方案**：
- 停止占用端口的进程：`lsof -i :8080` 或 `lsof -i :3000`
- 或修改端口配置：
  - 后端：修改`application.properties`中的`server.port`
  - 前端：修改`vite.config.js`中的`server.port`

### 3. 依赖安装失败
**问题**：`npm install`时出现网络错误
**解决方案**：
- 使用国内镜像源：`npm config set registry https://registry.npmmirror.com`
- 清除缓存后重试：`npm cache clean --force`

### 4. 跨域问题
虽然系统已在后端配置了`@CrossOrigin`，但如果出现跨域错误：
- 确认前端访问的是`http://localhost:3000`，后端运行在`http://localhost:8080`
- 检查`vite.config.js`中的代理配置是否正确

**Section sources**
- [application.properties](file://backend/src/main/resources/application.properties#L4)
- [vite.config.js](file://frontend/vite.config.js#L9-L12)
- [README.md](file://README.md#L290-L296)